<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Microservice Design Template Wizard</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Microservice Design Document Wizard</h1>
            <div class="header-actions">
                <button id="importBtn" class="btn btn-secondary">Import JSON</button>
                <button id="exportJsonBtn" class="btn btn-secondary">Export JSON</button>
                <button id="exportMarkdownBtn" class="btn btn-secondary">Export Markdown</button>
                <button id="exportDocBtn" class="btn btn-primary">Export Doc</button>
            </div>
        </header>

        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-text" id="progressText">0% Complete</div>
        </div>

        <!-- Wizard Navigation -->
        <nav class="wizard-nav">
            <div class="step-indicator" id="stepIndicator"></div>
            <div class="nav-buttons">
                <button id="prevBtn" class="btn btn-secondary" disabled>Previous</button>
                <button id="nextBtn" class="btn btn-primary">Next</button>
            </div>
        </nav>

        <!-- Wizard Content -->
        <div class="wizard-content" id="wizardContent">
            <!-- Step 1: Service Overview -->
            <div class="step" data-step="1">
                <h2>Service Overview</h2>
                <div class="form-group">
                    <label>Service Name *</label>
                    <input type="text" class="form-control" data-path="serviceName" required>
                    <p class="form-help">Unique identifier for your microservice (e.g., "payment-service" or "user-authentication")</p>
                </div>
                <div class="form-group">
                    <label>Team/Owner *</label>
                    <input type="text" class="form-control" data-path="teamOwner" required>
                    <p class="form-help">Team or individual responsible for maintaining this service</p>
                </div>
                <div class="form-group">
                    <label>Date (YYYY-MM-DD)</label>
                    <input type="date" class="form-control" data-path="date">
                    <p class="form-help">Date when this document is created or last updated</p>
                </div>
                <div class="form-group">
                    <label>Version</label>
                    <input type="text" class="form-control" data-path="version" placeholder="e.g., 1.0">
                    <p class="form-help">Document version using semantic versioning (e.g., 1.0, 1.1, 2.0)</p>
                </div>
                <div class="form-group">
                    <label>Status</label>
                    <select class="form-control" data-path="status">
                        <option value="Draft">Draft</option>
                        <option value="Review">Review</option>
                        <option value="Approved">Approved</option>
                    </select>
                    <p class="form-help">Current approval status of this design document</p>
                </div>
                <div class="form-group">
                    <label>Business Problem *</label>
                    <textarea class="form-control" data-path="businessProblem" rows="3" required></textarea>
                    <p class="form-help">Describe what business problem this service solves and why it's needed</p>
                </div>
                <div class="form-group">
                    <label>Key Business Objectives (one per line)</label>
                    <textarea class="form-control" data-path="businessObjectives" rows="3" placeholder="Objective 1&#10;Objective 2&#10;Objective 3"></textarea>
                    <p class="form-help">List the main business goals this service should achieve (bullet points)</p>
                </div>
                <div class="form-group">
                    <label>Service Purpose *</label>
                    <textarea class="form-control" data-path="servicePurpose" rows="3" required></textarea>
                    <p class="form-help">Brief description of what this microservice does and its primary role</p>
                </div>
            </div>

            <!-- Step 2: Service Boundaries -->
            <div class="step" data-step="2">
                <h2>Service Boundaries & Responsibilities</h2>
                <div class="form-group">
                    <label>Core Functionalities (one per line) *</label>
                    <textarea class="form-control" data-path="coreFunctionalities" rows="5" placeholder="Functionality 1&#10;Functionality 2&#10;Functionality 3" required></textarea>
                    <p class="form-help">List the main capabilities and responsibilities of this service (bullet points)</p>
                </div>
                
                <h3>Downstream Services</h3>
                <p class="form-help" style="margin-bottom: 15px;">Services that THIS service depends on (calls or consumes from)</p>
                <div id="downstreamServices" class="dynamic-list">
                    <div class="list-item">
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" placeholder="Service Name" data-path="downstream[0].name" class="form-control">
                            <p class="form-help" style="margin-top: 5px;">Name of the service we depend on (e.g., payment-service, notification-service)</p>
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" placeholder="Context" data-path="downstream[0].context" class="form-control">
                            <p class="form-help" style="margin-top: 5px;">Business context or purpose of this dependency (e.g., Payment processing, User notifications)</p>
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <select data-path="downstream[0].protocol" class="form-control" required>
                                <option>REST</option>
                                <option>RabbitMQ</option>
                                <option>Kafka</option>
                            </select>
                            <p class="form-help" style="margin-top: 5px;">Communication protocol used to interact with this service</p>
                        </div>
                        <button class="btn btn-remove" onclick="removeItem(this, 'downstream')">Remove</button>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="addService('downstream')">+ Add Downstream Service</button>

                <h3>Upstream Services</h3>
                <p class="form-help" style="margin-bottom: 15px;">Services that depend on THIS service (who calls or consumes from us)</p>
                <div id="upstreamServices" class="dynamic-list">
                    <div class="list-item">
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" placeholder="Service Name" data-path="upstream[0].name" class="form-control">
                            <p class="form-help" style="margin-top: 5px;">Name of the service that depends on us (e.g., frontend-app, mobile-app)</p>
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <input type="text" placeholder="Use Case" data-path="upstream[0].useCase" class="form-control">
                            <p class="form-help" style="margin-top: 5px;">How this service uses our service (e.g., Display user profile, Fetch payment status)</p>
                        </div>
                        <div class="form-group" style="margin-bottom: 15px;">
                            <select data-path="upstream[0].protocol" class="form-control" required>
                                <option>REST</option>
                                <option>RabbitMQ</option>
                                <option>Kafka</option>
                            </select>
                            <p class="form-help" style="margin-top: 5px;">Communication protocol used to interact with our service</p>
                        </div>
                        <button class="btn btn-remove" onclick="removeItem(this, 'upstream')">Remove</button>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="addService('upstream')">+ Add Upstream Service</button>
            </div>

            <!-- Step 3: API Specifications -->
            <div class="step" data-step="3">
                <h2>API Specifications</h2>
                <div class="form-group">
                    <label>Upload OpenAPI/Swagger Specification</label>
                    <input type="file" id="apiSpecFile" accept=".json" class="form-control">
                    <p class="form-help">Upload your OpenAPI/Swagger JSON file to auto-populate API endpoints (convert YAML to JSON if needed)</p>
                </div>
                <div id="apiSpecPreview" style="margin-top: 20px; display: none;">
                    <h3>Parsed API Endpoints</h3>
                    <div id="apiEndpointsList"></div>
                </div>
                <div class="form-group" style="margin-top: 20px;">
                    <label>API Documentation Link (optional)</label>
                    <input type="text" class="form-control" data-path="apiSpec.documentationLink" placeholder="https://swagger-ui.example.com/docs">
                    <p class="form-help">Link to interactive API documentation (Swagger UI, Redoc, etc.)</p>
                </div>
            </div>

            <!-- Step 4: Message Broker Integration -->
            <div class="step" data-step="4">
                <h2>Message Broker Integration</h2>
                <div class="form-group">
                    <label>Rationale for Using Messaging (select all that apply)</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" data-path="messagingRationale.async"> Asynchronous communication</label>
                        <label><input type="checkbox" data-path="messagingRationale.decouple"> Decouple services</label>
                        <label><input type="checkbox" data-path="messagingRationale.broadcast"> Broadcasting to multiple consumers</label>
                        <label><input type="checkbox" data-path="messagingRationale.delivery"> Guaranteed delivery</label>
                        <label><input type="checkbox" data-path="messagingRationale.volume"> High-volume events</label>
                        <label><input type="checkbox" data-path="messagingRationale.replay"> Event replay capability</label>
                        <label><input type="checkbox" data-path="messagingRationale.eventDriven"> Event-driven architecture</label>
                    </div>
                    <textarea class="form-control" data-path="messagingRationale.other" rows="2" placeholder="Other reasons"></textarea>
                    <p class="form-help">Why this service uses messaging instead of REST APIs</p>
                </div>

                <h3>Technology Choices</h3>
                <div class="form-group">
                    <label>Internal Communication Technology *</label>
                    <select class="form-control" data-path="messagingTech.internal" required>
                        <option value="RabbitMQ">RabbitMQ</option>
                        <option value="Kafka">Kafka</option>
                    </select>
                    <p class="form-help">Message broker for communication within your Kubernetes cluster</p>
                </div>
                <div class="form-group">
                    <label>External Communication Technology *</label>
                    <select class="form-control" data-path="messagingTech.external" required>
                        <option value="Kafka">Kafka</option>
                        <option value="RabbitMQ">RabbitMQ</option>
                    </select>
                    <p class="form-help">Message broker for communication with external systems</p>
                </div>

                <h3>Published Events</h3>
                <p class="form-help" style="margin-bottom: 15px;">Events that this service publishes for other services to consume</p>
                <div id="publishedEvents" class="dynamic-list"></div>
                <button class="btn btn-secondary" onclick="addEvent('published')">+ Add Published Event</button>

                <h3>Consumed Events</h3>
                <p class="form-help" style="margin-bottom: 15px;">Events from other services that this service consumes</p>
                <div id="consumedEvents" class="dynamic-list"></div>
                <button class="btn btn-secondary" onclick="addEvent('consumed')">+ Add Consumed Event</button>
            </div>

            <!-- Step 5: Data Storage -->
            <div class="step" data-step="5">
                <h2>Data Storage</h2>
                <div class="form-group">
                    <label>Primary Database Technology *</label>
                    <select id="databaseTechnologySelect" class="form-control" data-path="database.technology" required>
                        <option value="">Select Database</option>
                        <option value="PostgreSQL">PostgreSQL</option>
                        <option value="MySQL">MySQL</option>
                        <option value="MongoDB">MongoDB</option>
                        <option value="Cassandra">Cassandra</option>
                        <option value="DynamoDB">DynamoDB</option>
                        <option value="Redis">Redis</option>
                        <option value="CouchDB">CouchDB</option>
                        <option value="Neo4j">Neo4j</option>
                        <option value="Elasticsearch">Elasticsearch</option>
                        <option value="MariaDB">MariaDB</option>
                        <option value="SQL Server">SQL Server</option>
                        <option value="Oracle">Oracle</option>
                    </select>
                    <p class="form-help">Select the primary database for persistent data storage</p>
                </div>
                <div class="form-group">
                    <label>Database Rationale</label>
                    <select class="form-control" data-path="database.rationale">
                        <option value="">Select Rationale</option>
                        <option value="ACID compliance required">ACID compliance required</option>
                        <option value="Document flexibility needed">Document flexibility needed</option>
                        <option value="High performance reads">High performance reads</option>
                        <option value="Horizontal scalability">Horizontal scalability</option>
                        <option value="Graph data model">Graph data model</option>
                        <option value="Full-text search capabilities">Full-text search capabilities</option>
                        <option value="Time-series data">Time-series data</option>
                        <option value="Existing infrastructure">Existing infrastructure</option>
                        <option value="Team expertise">Team expertise</option>
                        <option value="Cost efficiency">Cost efficiency</option>
                    </select>
                    <p class="form-help">Primary reason for choosing this database</p>
                </div>

                <h3>Schema Design</h3>
                <div id="schemaDesignContainer">
                    <p class="form-help" style="margin-bottom: 15px;">Please select a database technology above to define schema details.</p>
                    <div id="databaseSchemas" class="dynamic-list"></div>
                    <button class="btn btn-secondary" id="addSchemaBtn" style="display: none;" onclick="addSchemaUpload()">+ Add Schema</button>
                </div>

                <h3>Caching</h3>
                <div class="form-group">
                    <label>Cache Technology</label>
                    <select class="form-control" data-path="cache.technology">
                        <option value="">Select Cache</option>
                        <option value="Redis">Redis</option>
                        <option value="Memcached">Memcached</option>
                        <option value="Couchbase">Couchbase</option>
                        <option value="Hazelcast">Hazelcast</option>
                        <option value="Infinispan">Infinispan</option>
                        <option value="Apache Ignite">Apache Ignite</option>
                    </select>
                    <p class="form-help">In-memory cache to improve performance and reduce database load</p>
                </div>
                <div class="form-group">
                    <label>Cache Rationale</label>
                    <select class="form-control" data-path="cache.rationale">
                        <option value="">Select Rationale</option>
                        <option value="Reduce database load">Reduce database load</option>
                        <option value="Improve response times">Improve response times</option>
                        <option value="Store session data">Store session data</option>
                        <option value="Store frequently accessed resources">Store frequently accessed resources</option>
                        <option value="API rate limiting">API rate limiting</option>
                        <option value="Reduce latency">Reduce latency</option>
                    </select>
                    <p class="form-help">Main reason for implementing caching</p>
                </div>
            </div>

            <!-- Step 6: Security -->
            <div class="step" data-step="6">
                <h2>Security</h2>
                <div class="form-group">
                    <label>Authentication Method *</label>
                    <select class="form-control" data-path="security.authMethod" required>
                        <option>JWT Bearer tokens</option>
                        <option>OAuth 2.0</option>
                        <option>API Keys</option>
                        <option>mTLS</option>
                    </select>
                    <p class="form-help">How users/services verify their identity when accessing the service</p>
                </div>
                <div class="form-group">
                    <label>Authorization Model *</label>
                    <select class="form-control" data-path="security.authzModel" required>
                        <option>RBAC (Role-Based)</option>
                        <option>ABAC (Attribute-Based)</option>
                        <option>Combination</option>
                    </select>
                    <p class="form-help">How permissions are assigned and enforced</p>
                </div>
                <div class="form-group">
                    <label>PII Fields (select all that apply)</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" data-path="security.piiFields.name"> Name</label>
                        <label><input type="checkbox" data-path="security.piiFields.email"> Email</label>
                        <label><input type="checkbox" data-path="security.piiFields.phone"> Phone</label>
                        <label><input type="checkbox" data-path="security.piiFields.address"> Address</label>
                        <label><input type="checkbox" data-path="security.piiFields.ssn"> SSN</label>
                        <label><input type="checkbox" data-path="security.piiFields.dateOfBirth"> Date of Birth</label>
                        <label><input type="checkbox" data-path="security.piiFields.paymentDetails"> Payment Details</label>
                        <label><input type="checkbox" data-path="security.piiFields.ipAddress"> IP Address</label>
                        <label><input type="checkbox" data-path="security.piiFields.location"> Location</label>
                        <label><input type="checkbox" data-path="security.piiFields.medicalInfo"> Medical Information</label>
                    </div>
                    <p class="form-help">Personally Identifiable Information processed by this service (for compliance)</p>
                </div>
                <div class="form-group">
                    <label>Encryption at Rest *</label>
                    <select class="form-control" data-path="security.encryptionAtRest" required>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Encrypt data when stored on disk</p>
                </div>
                <div class="form-group">
                    <label>Encryption in Transit *</label>
                    <select class="form-control" data-path="security.encryptionInTransit" required>
                        <option value="Yes">Yes (TLS)</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Encrypt data when transmitted over the network</p>
                </div>
            </div>

            <!-- Step 7: Observability -->
            <div class="step" data-step="7">
                <h2>Observability</h2>
                <div class="form-group">
                    <label>Logging System</label>
                    <select class="form-control" data-path="observability.loggingSystem">
                        <option value="">Select Logging System</option>
                        <option value="ELK Stack">ELK Stack</option>
                        <option value="CloudWatch">CloudWatch</option>
                        <option value="Datadog">Datadog</option>
                        <option value="Splunk">Splunk</option>
                        <option value="Grafana Loki">Grafana Loki</option>
                        <option value="Graylog">Graylog</option>
                        <option value="Papertrail">Papertrail</option>
                    </select>
                    <p class="form-help">System for aggregating and searching application logs</p>
                </div>
                <div class="form-group">
                    <label>Metrics System</label>
                    <select class="form-control" data-path="observability.metricsSystem">
                        <option value="">Select Metrics System</option>
                        <option value="Prometheus + Grafana">Prometheus + Grafana</option>
                        <option value="CloudWatch">CloudWatch</option>
                        <option value="Datadog">Datadog</option>
                        <option value="New Relic">New Relic</option>
                        <option value="InfluxDB">InfluxDB</option>
                        <option value="SignalFx">SignalFx</option>
                    </select>
                    <p class="form-help">System for collecting and visualizing performance metrics</p>
                </div>
                <div class="form-group">
                    <label>Tracing System</label>
                    <select class="form-control" data-path="observability.tracingSystem">
                        <option value="">Select Tracing System</option>
                        <option value="Jaeger">Jaeger</option>
                        <option value="AWS X-Ray">AWS X-Ray</option>
                        <option value="Datadog APM">Datadog APM</option>
                        <option value="Zipkin">Zipkin</option>
                        <option value="New Relic">New Relic</option>
                        <option value="Lightstep">Lightstep</option>
                    </select>
                    <p class="form-help">Distributed tracing system for request flow analysis</p>
                </div>
                <div class="form-group">
                    <label>Production Log Level</label>
                    <select class="form-control" data-path="observability.prodLogLevel">
                        <option>INFO</option>
                        <option>WARN</option>
                        <option>ERROR</option>
                    </select>
                    <p class="form-help">Minimum log level for production environment (affects volume)</p>
                </div>
                <div class="form-group">
                    <label>Staging Log Level</label>
                    <select class="form-control" data-path="observability.stageLogLevel">
                        <option>INFO</option>
                        <option>DEBUG</option>
                    </select>
                    <p class="form-help">Minimum log level for staging environment</p>
                </div>
                <div class="form-group">
                    <label>Dev Log Level</label>
                    <select class="form-control" data-path="observability.devLogLevel">
                        <option>DEBUG</option>
                        <option>TRACE</option>
                    </select>
                    <p class="form-help">Minimum log level for development environment (most verbose)</p>
                </div>
            </div>

            <!-- Step 8: Performance & Scalability -->
            <div class="step" data-step="8">
                <h2>Performance & Scalability</h2>
                <div class="form-group">
                    <label>Target Latency (ms)</label>
                    <input type="number" class="form-control" data-path="performance.targetLatency">
                    <p class="form-help">Target response time for the p95 percentile (e.g., 200 for 200ms)</p>
                </div>
                <div class="form-group">
                    <label>Peak Throughput (req/sec)</label>
                    <input type="number" class="form-control" data-path="performance.peakThroughput">
                    <p class="form-help">Maximum requests per second during peak load</p>
                </div>
                <div class="form-group">
                    <label>Average Throughput (req/sec)</label>
                    <input type="number" class="form-control" data-path="performance.avgThroughput">
                    <p class="form-help">Average requests per second during normal operation</p>
                </div>
                <div class="form-group">
                    <label>Horizontal Scaling *</label>
                    <select class="form-control" data-path="performance.horizontalScaling" required>
                        <option value="Yes">Yes (stateless)</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Whether service can scale by adding more instances</p>
                </div>
                <div class="form-group">
                    <label>Auto-scaling Enabled</label>
                    <select class="form-control" data-path="performance.autoScaling">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Automatically adjust instance count based on load</p>
                </div>
            </div>

            <!-- Step 9: Disaster Recovery -->
            <div class="step" data-step="9">
                <h2>Disaster Recovery & Resilience</h2>
                <div class="form-group">
                    <label>Circuit Breaker Failure Threshold (%)</label>
                    <input type="number" class="form-control" data-path="dr.circuitBreakerFailure" value="50">
                    <p class="form-help">Error rate that triggers circuit breaker to stop calling failing service</p>
                </div>
                <div class="form-group">
                    <label>Circuit Breaker Timeout (seconds)</label>
                    <input type="number" class="form-control" data-path="dr.circuitBreakerTimeout">
                    <p class="form-help">Maximum time to wait for a response before considering it failed</p>
                </div>
                <div class="form-group">
                    <label>Multi-AZ Deployment *</label>
                    <select class="form-control" data-path="dr.multiAZ" required>
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Deploy across multiple availability zones for high availability</p>
                </div>
                <div class="form-group">
                    <label>RTO - Recovery Time Objective (hours)</label>
                    <input type="number" class="form-control" data-path="dr.rto">
                    <p class="form-help">Maximum acceptable downtime (how quickly to restore service)</p>
                </div>
                <div class="form-group">
                    <label>RPO - Recovery Point Objective (hours)</label>
                    <input type="number" class="form-control" data-path="dr.rpo">
                    <p class="form-help">Maximum acceptable data loss (how recent backups need to be)</p>
                </div>
                <div class="form-group">
                    <label>Backup Frequency</label>
                    <input type="text" class="form-control" data-path="dr.backupFrequency" placeholder="e.g., Daily full, hourly incremental">
                    <p class="form-help">How often data is backed up (e.g., "Daily full, hourly incremental")</p>
                </div>
            </div>

            <!-- Step 10: Testing Strategy -->
            <div class="step" data-step="10">
                <h2>Testing Strategy</h2>
                <div class="form-group">
                    <label>Unit Test Coverage Target (%)</label>
                    <input type="number" class="form-control" data-path="testing.unitTestCoverage" value="85">
                    <p class="form-help">Minimum code coverage percentage for unit tests (85% is a common target)</p>
                </div>
                <div class="form-group">
                    <label>Unit Test Framework</label>
                    <select class="form-control" data-path="testing.unitTestFramework">
                        <option value="">Select Framework</option>
                        <option value="JUnit 5">JUnit 5</option>
                        <option value="Jest">Jest</option>
                        <option value="pytest">pytest</option>
                        <option value="Mocha">Mocha</option>
                        <option value="PHPUnit">PHPUnit</option>
                        <option value="RSpec">RSpec</option>
                        <option value="MSTest">MSTest</option>
                        <option value="JUnit 4">JUnit 4</option>
                        <option value="Vitest">Vitest</option>
                    </select>
                    <p class="form-help">Testing framework used for writing unit tests</p>
                </div>
                <div class="form-group">
                    <label>Integration Test Environment</label>
                    <select class="form-control" data-path="testing.integrationEnv">
                        <option>Testcontainers</option>
                        <option>Embedded</option>
                        <option>Docker Compose</option>
                    </select>
                    <p class="form-help">How dependencies are provisioned for integration tests</p>
                </div>
                <div class="form-group">
                    <label>Performance Test Tool</label>
                    <select class="form-control" data-path="testing.performanceTool">
                        <option value="">Select Tool</option>
                        <option value="JMeter">JMeter</option>
                        <option value="k6">k6</option>
                        <option value="Gatling">Gatling</option>
                        <option value="Locust">Locust</option>
                        <option value="Artillery">Artillery</option>
                        <option value="Apache Bench">Apache Bench</option>
                        <option value="wrk">wrk</option>
                        <option value="Vegeta">Vegeta</option>
                    </select>
                    <p class="form-help">Tool used for load and performance testing</p>
                </div>
                <div class="form-group">
                    <label>Chaos Testing Enabled</label>
                    <select class="form-control" data-path="testing.chaosTesting">
                        <option value="Implemented">Implemented</option>
                        <option value="Planned">Planned</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Whether chaos engineering practices are implemented</p>
                </div>
            </div>

            <!-- Step 11: Deployment -->
            <div class="step" data-step="11">
                <h2>Deployment</h2>
                <div class="form-group">
                    <label>Container Base Image</label>
                    <select class="form-control" data-path="deployment.baseImage">
                        <option value="">Select Base Image</option>
                        <option value="eclipse-temurin:17-jre-alpine">eclipse-temurin:17-jre-alpine</option>
                        <option value="python:3.11-slim">python:3.11-slim</option>
                        <option value="node:20-alpine">node:20-alpine</option>
                        <option value="openjdk:17-jre-slim">openjdk:17-jre-slim</option>
                        <option value="golang:1.21-alpine">golang:1.21-alpine</option>
                        <option value="mcr.microsoft.com/dotnet/aspnet:8.0">dotnet:8.0</option>
                        <option value="php:8.2-fpm-alpine">php:8.2-fpm-alpine</option>
                        <option value="ruby:3.2-alpine">ruby:3.2-alpine</option>
                    </select>
                    <p class="form-help">Docker base image for containerizing the application</p>
                </div>
                <div class="form-group">
                    <label>Target Image Size (MB)</label>
                    <input type="number" class="form-control" data-path="deployment.imageSize">
                    <p class="form-help">Target size for optimized container image</p>
                </div>
                <div class="form-group">
                    <label>Orchestration Platform</label>
                    <input type="text" class="form-control" data-path="deployment.orchestration" value="Kubernetes" readonly>
                    <p class="form-help">Container orchestration platform</p>
                </div>
                <div class="form-group">
                    <label>Service Mesh</label>
                    <select class="form-control" data-path="deployment.serviceMesh">
                        <option>Istio</option>
                        <option>Linkerd</option>
                        <option>Consul Connect</option>
                    </select>
                    <p class="form-help">Service mesh for traffic management, security, and observability</p>
                </div>
                <div class="form-group">
                    <label>Deployment Strategy *</label>
                    <select class="form-control" data-path="deployment.strategy" required>
                        <option>Rolling update</option>
                        <option>Blue-green</option>
                        <option>Canary</option>
                    </select>
                    <p class="form-help">Strategy for deploying updates with minimal downtime</p>
                </div>
                <div class="form-group">
                    <label>CI/CD Tool</label>
                    <select class="form-control" data-path="deployment.cicdTool">
                        <option value="">Select CI/CD Tool</option>
                        <option value="GitHub Actions">GitHub Actions</option>
                        <option value="GitLab CI">GitLab CI</option>
                        <option value="Jenkins">Jenkins</option>
                        <option value="CircleCI">CircleCI</option>
                        <option value="Azure DevOps">Azure DevOps</option>
                        <option value="Bamboo">Bamboo</option>
                        <option value="Travis CI">Travis CI</option>
                        <option value="TeamCity">TeamCity</option>
                    </select>
                    <p class="form-help">Continuous integration and deployment platform</p>
                </div>
            </div>

            <!-- Step 12: Compliance & Governance -->
            <div class="step" data-step="12">
                <h2>Compliance & Governance</h2>
                <div class="form-group">
                    <label>Applicable Regulations (select all)</label>
                    <div class="checkbox-group">
                        <label><input type="checkbox" data-path="compliance.gdpr"> GDPR</label>
                        <label><input type="checkbox" data-path="compliance.hipaa"> HIPAA</label>
                        <label><input type="checkbox" data-path="compliance.pciDss"> PCI-DSS</label>
                        <label><input type="checkbox" data-path="compliance.soc2"> SOC 2 Type II</label>
                    </div>
                    <p class="form-help">Regulatory frameworks this service must comply with</p>
                </div>
                <div class="form-group">
                    <label>Data Retention Policy</label>
                    <textarea class="form-control" data-path="compliance.dataRetention" rows="3"></textarea>
                    <p class="form-help">How long data should be retained before deletion (e.g., "7 years for financial records")</p>
                </div>
                <div class="form-group">
                    <label>Audit Trail Enabled</label>
                    <select class="form-control" data-path="compliance.auditTrail">
                        <option value="Yes">Yes</option>
                        <option value="No">No</option>
                    </select>
                    <p class="form-help">Log all data access and modifications for compliance auditing</p>
                </div>
            </div>

            <!-- Step 13: Open Questions & Decisions -->
            <div class="step" data-step="13">
                <h2>Open Questions & Decisions</h2>
                <h3>Decisions Made</h3>
                <p class="form-help" style="margin-bottom: 15px;">Track important architectural or technical decisions with rationale</p>
                <div id="decisionsMade" class="dynamic-list"></div>
                <button class="btn btn-secondary" onclick="addDecision()">+ Add Decision</button>

                <h3>Open Questions</h3>
                <p class="form-help" style="margin-bottom: 15px;">Document unresolved questions that need answers or decisions</p>
                <div id="openQuestions" class="dynamic-list"></div>
                <button class="btn btn-secondary" onclick="addOpenQuestion()">+ Add Question</button>
            </div>

            <!-- Step 14: Review & Approval -->
            <div class="step" data-step="14">
                <h2>Review & Approval</h2>
                <div class="form-group">
                    <label>Tech Lead</label>
                    <input type="text" class="form-control" data-path="review.techLead">
                    <p class="form-help">Technical lead responsible for reviewing the design</p>
                </div>
                <div class="form-group">
                    <label>Solutions Architect</label>
                    <input type="text" class="form-control" data-path="review.solutionsArchitect">
                    <p class="form-help">Solutions architect who reviewed the overall architecture</p>
                </div>
                <div class="form-group">
                    <label>Security Architect</label>
                    <input type="text" class="form-control" data-path="review.securityArchitect">
                    <p class="form-help">Security architect who reviewed security aspects</p>
                </div>
                <div class="form-group">
                    <label>DevOps Lead</label>
                    <input type="text" class="form-control" data-path="review.devOpsLead">
                    <p class="form-help">DevOps lead who reviewed deployment and infrastructure</p>
                </div>
                <div class="form-group">
                    <label>Product Owner</label>
                    <input type="text" class="form-control" data-path="review.productOwner">
                    <p class="form-help">Product owner who reviewed business alignment</p>
                </div>
                <div class="form-group">
                    <label>Approval Status</label>
                    <select class="form-control" data-path="review.approvalStatus">
                        <option>Pending</option>
                        <option>Approved</option>
                        <option>Approved with conditions</option>
                        <option>Rejected - revisions required</option>
                    </select>
                    <p class="form-help">Current approval status of this design document</p>
                </div>
            </div>

            <!-- Step 15: Appendix -->
            <div class="step" data-step="15">
                <h2>Appendix</h2>
                <div class="form-group">
                    <label>Document Version</label>
                    <input type="text" class="form-control" data-path="appendix.docVersion" value="1.0">
                    <p class="form-help">Version of this design document (increment for major changes)</p>
                </div>
                <div class="form-group">
                    <label>Document Owner</label>
                    <input type="text" class="form-control" data-path="appendix.docOwner">
                    <p class="form-help">Team or individual who owns and maintains this document</p>
                </div>
                <div class="form-group">
                    <label>Distribution Level</label>
                    <select class="form-control" data-path="appendix.distribution">
                        <option>Internal</option>
                        <option>Confidential</option>
                        <option>Public</option>
                    </select>
                    <p class="form-help">Confidentiality level of this document</p>
                </div>
                <div class="form-group">
                    <label>API Documentation Link</label>
                    <input type="text" class="form-control" data-path="appendix.apiDocsLink" placeholder="URL or file path">
                    <p class="form-help">Link to detailed API documentation (Swagger/OpenAPI specs)</p>
                </div>
                <div class="form-group">
                    <label>Architecture Diagrams Link</label>
                    <input type="text" class="form-control" data-path="appendix.architectureDiagramsLink" placeholder="URL or file path">
                    <p class="form-help">Link to visual architecture diagrams (diagrams.net, Confluence, etc.)</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Hidden file input for JSON import -->
    <input type="file" id="jsonFileInput" accept=".json" style="display: none;">

    <script src="wizard.js"></script>
    <script src="template-renderer.js"></script>
</body>
</html>

